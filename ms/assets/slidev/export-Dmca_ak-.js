const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/DrawingPreview-BLFJRhzO.js","assets/slidev/SlideWrapper-_SvgkJsm.js","assets/modules/vue-BS18vBqD.js","assets/index-Cg8vQeTP.js","assets/modules/shiki-CNP4QhyE.js","assets/modules/shiki-Bxv373Z5.css","assets/index-BZEc1DV_.css","assets/slidev/title-renderer.md_vue_type_script_setup_true_lang-DpJqFNT4.js","assets/SlideWrapper-D6dPD96t.css","assets/pptxgen.es-E9alsr4A.js","assets/modules/file-saver-DcpsQAjh.js"])))=>i.map(i=>d[i]);
import{t as ke,b as we,i as he,q as D,_ as Z,v as T,w as M,x as X,y,z as ye,A as Ce,B as _e,a as re,c as ae,C as Se,D as ne,s as Pe,u as Ve,E as $e,F as H,G as V,H as De,I as Ee}from"../index-Cg8vQeTP.js";import{d as j,ag as Ie,b as U,w as E,B as R,S as a,o as s,g as t,af as f,ai as C,ap as Te,z as _,P as Re,aq as K,O as Le,am as Y,f as v,k as Ue,e as d,i as N,n as ue,F as L,an as J,ak as Q,ar as se,r as $,a7 as Ne,W as ze,as as Be,t as Fe,R as Me,at as je,a as Ae,aj as q}from"../modules/vue-BS18vBqD.js";import{_ as Ge,a as Oe}from"./play.vue_vue_type_script_setup_true_lang-CRD-er42.js";import{e as I,_ as We,f as He}from"./shortcuts-D9sD9xZo.js";import{G as qe,S as Xe,d as Ke,i as oe,s as Ye}from"./SlideWrapper-_SvgkJsm.js";import"../modules/shiki-CNP4QhyE.js";import"../modules/unplugin-icons-D9x5grdY.js";import"./title-renderer.md_vue_type_script_setup_true_lang-DpJqFNT4.js";import"./IconButton.vue_vue_type_script_setup_true_lang-B-k_0ihd.js";function Je(){return{isColorSchemaConfigured:he,isDark:we,toggleDark:ke}}const Qe={class:"form-check op-70"},Ze={class:"flex my-1"},et=j({__name:"ExportPdfTip",props:{modelValue:{default:!1}},emits:["update:modelValue","print"],setup(k,{emit:o}){const r=k,i=o,x=Ie(r,"modelValue",i);function g(){x.value=!1,i("print")}return(A,l)=>(s(),U(Ge,{modelValue:a(x),"onUpdate:modelValue":l[3]||(l[3]=b=>R(x)?x.value=b:null),class:"px-6 py-4 flex flex-col gap-2"},{default:E(()=>[l[10]||(l[10]=t("div",{class:"flex gap-2 text-xl"},[t("div",{class:"i-carbon:information my-auto"}),f(" Tips ")],-1)),t("div",null,[l[4]||(l[4]=f(" Slidev will open your browser's built-in print dialog to export the slides as PDF. ")),l[5]||(l[5]=t("br",null,null,-1)),l[6]||(l[6]=f(" In the print dialog, please: ")),l[7]||(l[7]=t("ul",{class:"list-disc my-4 pl-4"},[t("li",null,[f(' Choose "Save as PDF" as the Destination. '),t("span",{class:"op-70 text-xs"},' (Not "Microsoft Print to PDF") ')]),t("li",null,' Choose "Default" as the Margin. '),t("li",null,' Toggle on "Print backgrounds". ')],-1)),l[8]||(l[8]=t("div",{class:"mb-2 op-70 text-sm"},[f(" If you're encountering problems, please try "),t("a",{href:"https://sli.dev/builtin/cli#export"}," the CLI "),f(" or "),t("a",{href:"https://github.com/slidevjs/slidev/issues/new"}," open an issue"),f(". ")],-1)),t("div",Qe,[C(t("input",{"onUpdate:modelValue":l[0]||(l[0]=b=>R(D)?D.value=b:null),name:"record-camera",type:"checkbox"},null,512),[[Te,a(D)]]),t("label",{for:"record-camera",onClick:l[1]||(l[1]=b=>D.value=!a(D))},"Don't show this dialog next time.")])]),t("div",Ze,[t("button",{class:"cancel",onClick:l[2]||(l[2]=b=>x.value=!1)}," Cancel "),l[9]||(l[9]=t("div",{class:"flex-auto"},null,-1)),t("button",{onClick:g}," Start ")])]),_:1},8,["modelValue"]))}}),tt=Z(et,[["__scopeId","data-v-c53c193f"]]),lt=["id"],at=j({__name:"PrintSlideClick",props:{nav:{}},setup(k){const o=_(()=>k.nav.currentSlideRoute.value),r=_(()=>({height:`${M.value}px`,width:`${T.value}px`})),i=Re();X(()=>import("./DrawingPreview-BLFJRhzO.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then(g=>i.value=g.default);const x=_(()=>`${o.value.no.toString().padStart(3,"0")}-${(k.nav.clicks.value+1).toString().padStart(2,"0")}`);return K(ye,Le({nav:k.nav,configs:y,themeConfigs:_(()=>y.themeConfig)})),K(Ce,Y("slide-element")),(g,A)=>(s(),v("div",{id:x.value,ref:"slide-element",class:"print-slide-container",style:Ue(r.value)},[d(a(qe)),d(Xe,{"clicks-context":g.nav.clicksContext.value,class:ue(a(_e)(o.value)),route:o.value},null,8,["clicks-context","class","route"]),i.value?(s(),U(a(i),{key:0,page:o.value.no},null,8,["page"])):N("v-if",!0),d(a(Ke))],12,lt))}}),ie=Z(at,[["__scopeId","data-v-e6229f86"]]),nt=j({__name:"PrintSlide",props:{hidden:{type:Boolean},route:{}},setup(k){const{isPrintWithClicks:o}=re(),r=ae(k.route,()=>o.value?0:Se);return(i,x)=>(s(),v(L,null,[C(d(ie,{nav:a(ne)(i.route,a(r))},null,8,["nav"]),[[J,!i.hidden]]),a(o)?(s(),v(L,{key:0},[N(`
      clicks0.total can be any number >=0 when rendering.
      So total-clicksStart can be negative in intermediate states.
    `),(s(!0),v(L,null,Q(Math.max(0,a(r).total-a(r).clicksStart),g=>C((s(),U(ie,{key:g,nav:a(ne)(i.route,a(ae)(i.route,g+a(r).clicksStart))},null,8,["nav"])),[[J,!i.hidden]])),128))],64)):N("v-if",!0)],64))}}),st={key:1,class:"fixed inset-0 flex flex-col md:flex-row md:gap-8 print:position-unset print:inset-0 print:block print:min-h-max justify-center of-hidden bg-main"},ot={class:"print:hidden min-w-fit flex flex-wrap md:flex-nowrap md:of-y-auto md:flex-col gap-2 p-6 max-w-100"},it={class:"text-3xl md:my-4 flex items-center gap-2 w-full"},rt={flex:"~ col gap-2"},ut=["placeholder"],dt={class:"min-w-fit",flex:"~ col gap-3"},pt={key:0,class:"min-w-full w-0 text-orange/100 p-1 mb-2 bg-orange/10 rounded"},ct={class:"relative flex flex-col gap-2 flex-nowrap"},vt={class:"flex flex-col gap-2 min-w-max"},mt={id:"export-container",ref:"export-container",relative:""},ft={"print:hidden":"",fixed:"","right-5":"","bottom-5":"",px2:"",py0:"","z-label":"","slidev-glass-effect":""},xt={op75:""},gt={id:"export-content",ref:"export-content"},bt={key:0,id:"export-content-images",class:"print:hidden grid"},kt=["src"],wt=j({__name:"export",setup(k){je(u=>({"0488ce7c":`scale(${B.value})`,"393d32b5":me.value}));const{slides:o,isPrintWithClicks:r,hasNext:i,go:x,next:g,currentSlideNo:A,clicks:l,printRange:b}=re(),de=Me(),{isColorSchemaConfigured:pe,isDark:z}=Je(),{width:ce}=se(Y("export-container")),{height:ve}=se(Y("export-content")),B=_(()=>ce.value/T.value),me=_(()=>`${ve.value*(B.value-1)}px`),F=$(""),fe=$(1e3),m=$(null),p=$(null),S=$(y.exportFilename||Pe);Ve({title:S}),K(De,B);const G=$(!1);function xe(){D.value?ee():G.value=!0}function ee(){$e(),setTimeout(window.print,100)}async function O(){if(m.value&&(m.value.dispose(),m.value=null),p.value)return p.value;try{m.value=await Ye(T.value*2,M.value*2);const e=[];for(x(1,0,!0),await H(fe.value+V.value);m.value;)if(e.push({slideIndex:A.value-1,clickIndex:l.value,dataUrl:m.value.screenshot(document.getElementById("slide-content"))}),i.value)await H(V.value),g(),await H(V.value);else break;m.value&&(m.value.dispose(),p.value=e,m.value=null)}catch(u){console.error(u),p.value=null}finally{de.push("/export")}return p.value}async function ge(){const u=await O();if(!u)return;const e=await X(()=>import("../pptxgen.es-E9alsr4A.js"),__vite__mapDeps([9,10])).then(h=>h.default).then(h=>new h),P=`${T.value}x${M.value}`;e.defineLayout({name:P,width:T.value/96,height:M.value/96}),e.layout=P,y.author&&(e.author=y.author),e.company="Created using Slidev",e.title=S.value,typeof y.info=="string"&&(e.subject=y.info),u.forEach(({slideIndex:h,dataUrl:W})=>{const te=e.addSlide();te.background={data:W};const le=o.value[h].meta.slide.note;le&&te.addNotes(le)});const w=await e.write({outputType:"blob",compression:!0}),n=URL.createObjectURL(w),c=document.createElement("a");c.href=n,c.download=`${S.value}.pptx`,c.click()}async function be(){const u=await O();if(!u)return;const{createTarGzip:e}=await X(async()=>{const{createTarGzip:c}=await import("../index-Dal08D7e.js");return{createTarGzip:c}},[]),P=await e(u.map(({slideIndex:c,dataUrl:h})=>({name:`${c}.png`,data:new Uint8Array(atob(h.split(",")[1]).split("").map(W=>W.charCodeAt(0)))}))),w=document.createElement("a"),n=new Blob([P],{type:"application/gzip"});w.href=URL.createObjectURL(n),w.download=`${S.value}.tar.gz`,w.click()}return Ne(_(()=>{var u;return(u=m.value)!=null&&u.isActive?`
html {
  cursor: none;
  margin-bottom: 20px;
}
body {
  pointer-events: none;
}`:`
:root {
  --slidev-slide-scale: ${B.value};
}
`})),ze([z,b,r],()=>p.value=null),Be([o,F],()=>b.value=Ee(o.value.length,F.value),{debounce:300}),(u,e)=>{var w;const P=Ae("RouterLink");return(w=m.value)!=null&&w.isActive?(s(),U(Oe,{key:0})):(s(),v("div",st,[t("div",ot,[t("h1",it,[d(P,{to:"/",class:"i-carbon:previous-outline op-70 hover:op-100"}),e[7]||(e[7]=f(" Browser Exporter ")),e[8]||(e[8]=t("sup",{op50:"",italic:"","text-sm":""},"Experimental",-1))]),t("div",rt,[e[9]||(e[9]=t("h2",null,"Options",-1)),d(I,{title:"Title"},{default:E(()=>[C(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>S.value=n),type:"text"},null,512),[[q,S.value]])]),_:1}),d(I,{title:"Range"},{default:E(()=>[C(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>F.value=n),type:"text",placeholder:`1-${a(o).length}`},null,8,ut),[[q,F.value]])]),_:1}),d(I,{title:"Color Mode"},{default:E(()=>[d(We,{modelValue:a(z),"onUpdate:modelValue":e[2]||(e[2]=n=>R(z)?z.value=n:null),options:[{value:!1,label:"Light"},{value:!0,label:"Dark"}],disabled:a(pe)},null,8,["modelValue","disabled"])]),_:1}),d(I,{title:"With clicks"},{default:E(()=>[d(He,{modelValue:a(r),"onUpdate:modelValue":e[3]||(e[3]=n=>R(r)?r.value=n:null)},null,8,["modelValue"])]),_:1})]),e[16]||(e[16]=t("div",{class:"flex-grow"},null,-1)),t("div",dt,[t("div",{border:"~ main rounded-lg",p3:"",flex:"~ col gap-2"},[e[10]||(e[10]=t("h2",null,"Export as Vector File",-1)),t("div",{class:"flex flex-col gap-2 min-w-max"},[t("button",{class:"slidev-form-button",onClick:xe}," PDF ")])]),t("div",{border:"~ main rounded-lg",p3:"",flex:"~ col gap-2",class:ue(a(oe)?"":"border-orange")},[e[14]||(e[14]=t("h2",null,"Export as Images",-1)),a(oe)?N("v-if",!0):(s(),v("div",pt,e[11]||(e[11]=[t("span",{class:"i-carbon:warning-alt inline-block mb--.5"},null,-1),f(" Your browser may not support image capturing. If you encounter issues, please use a modern Chromium-based browser, or export via the CLI. ")]))),t("div",{class:"flex flex-col gap-2 min-w-max"},[t("button",{class:"slidev-form-button",onClick:ge}," PPTX "),t("button",{class:"slidev-form-button",onClick:be}," PNGs.gz ")]),e[15]||(e[15]=t("div",{"w-full":"","h-1px":"",border:"t main",my2:""},null,-1)),t("div",ct,[t("div",vt,[p.value?(s(),v("button",{key:0,class:"slidev-form-button flex justify-center items-center gap-2",onClick:e[4]||(e[4]=n=>p.value=null)},e[12]||(e[12]=[t("span",{class:"i-carbon:trash-can inline-block text-xl"},null,-1),f(" Clear Captured Images ")]))):(s(),v("button",{key:1,class:"slidev-form-button flex justify-center items-center gap-2",onClick:O},e[13]||(e[13]=[t("div",{class:"i-carbon:drop-photo inline-block text-xl"},null,-1),f(" Pre-capture slides as Images ")]))),d(I,{title:"Delay",description:"Delay between capturing each slide in milliseconds.<br>Increase this value if slides are captured incompletely. <br>(Not related to PDF export)"},{default:E(()=>[C(t("input",{"onUpdate:modelValue":e[5]||(e[5]=n=>R(V)?V.value=n:null),type:"number",step:"50",min:"50"},null,512),[[q,a(V)]])]),_:1})])])],2)])]),t("div",mt,[t("div",ft,[t("span",xt,"Rendering as "+Fe(p.value?"Captured Images":"DOM"),1)]),C(t("div",gt,[(s(!0),v(L,null,Q(a(o),(n,c)=>(s(),U(nt,{key:c,hidden:!a(b).includes(c+1),route:n},null,8,["hidden","route"]))),128))],512),[[J,!p.value]]),p.value?(s(),v("div",bt,[(s(!0),v(L,null,Q(p.value,(n,c)=>(s(),v("div",{key:c,class:"print-slide-container"},[t("img",{src:n.dataUrl},null,8,kt)]))),128))])):N("v-if",!0)],512),e[17]||(e[17]=t("div",{id:"twoslash-container"},null,-1)),d(tt,{modelValue:G.value,"onUpdate:modelValue":e[6]||(e[6]=n=>G.value=n),onPrint:ee},null,8,["modelValue"])]))}}}),Et=Z(wt,[["__scopeId","data-v-4c2cc7c6"]]);export{Et as default};
