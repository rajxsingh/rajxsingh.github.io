var e=Object.defineProperty,t=(t,s,i)=>((t,s,i)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i)(t,"symbol"!=typeof s?s+"":s,i);import{r as s}from"./phaser-UvlxNa5i.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var i=s();class r extends i.Scene{constructor(){super("Boot")}preload(){}create(){this.scene.start("Preloader")}}class a extends i.Scene{constructor(){super("Game"),t(this,"camera"),t(this,"background"),t(this,"msg_text"),t(this,"player"),t(this,"cursors")}create(){"function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((e=>{"granted"===e&&window.addEventListener("deviceorientation",this.handleOrientation.bind(this))})).catch(console.error):window.addEventListener("deviceorientation",this.handleOrientation.bind(this)),this.camera=this.cameras.main,this.camera.setBackgroundColor(3329330),this.input.once("pointerdown",(()=>{this.scene.start("GameOver")}));const e=this.make.tilemap({key:"map"}),t=e.addTilesetImage("tilemap-template-32px-grid-dark","tiles"),s=e.createLayer("Tile Layer 1",t,0,0),i=(this.scale.width-s.width)/2,r=(this.scale.height-s.height)/2;s.setPosition(i,r),this.duck=this.physics.add.sprite(45,45,"duck"),this.duck.setDisplaySize(24,28),this.duck.setCollideWorldBounds(!0),this.anims.create({key:"idle",frames:[{key:"duck",frame:{start:0,end:1}}],frameRate:1,repeat:-1}),this.anims.create({key:"walk",frames:this.anims.generateFrameNumbers("duck",{start:6,end:11}),frameRate:8,repeat:-1}),s.forEachTile((e=>{var t;if(!e||-1===e.index||!e.tileset||!e.tileset.tileData)return;const s=e.tileset.tileData[e.index-e.tileset.firstgid];(null==(t=null==s?void 0:s.objectgroup)?void 0:t.objects)&&s.objectgroup.objects.forEach((t=>{var s;if(!(null==(s=t.properties)?void 0:s.some((e=>"collides"===e.name&&e.value))))return;const i=e.getLeft()+t.x+t.width/2,r=e.getTop()+t.y+t.height/2,a=this.physics.add.staticImage(i,r,null);a.body.setSize(t.width,t.height),a.setVisible(!1),this.physics.add.collider(this.duck,a)}))})),this.physics.world.createDebugGraphic(),this.cursors=this.input.keyboard.createCursorKeys()}handleOrientation(e){const t=e.gamma||0,s=e.beta||0;this.moveX=t/30,this.moveY=s/30}update(){if(!this.cursors)return;const e=200;this.duck.setVelocity(0),this.duck.anims.play("idle",!0),this.cursors.left.isDown?(this.duck.setVelocityX(-200),this.duck.anims.play("walk",!0),this.duck.setFlipX(!0)):this.cursors.right.isDown&&(this.duck.setVelocityX(e),this.duck.anims.play("walk",!0),this.duck.setFlipX(!1)),this.cursors.up.isDown?(this.duck.setVelocityY(-200),this.duck.anims.play("walk",!0)):this.cursors.down.isDown&&(this.duck.setVelocityY(e),this.duck.anims.play("walk",!0)),(this.moveX||this.moveY)&&(this.duck.setVelocityX(this.moveX*e),this.duck.setVelocityY(this.moveY*e),this.duck.anims.play("walk",!0),this.moveX<0?this.duck.setFlipX(!0):this.moveX>0&&this.duck.setFlipX(!1))}}class n extends i.Scene{constructor(){super("GameOver")}create(){this.cameras.main.setBackgroundColor(16711680),this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}class o extends i.Scene{constructor(){super("MainMenu")}create(){this.add.text(512,460,"Main Menu",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("Game")}))}}class c extends i.Scene{constructor(){super("Preloader")}init(){this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("tiles","tilemap-template-32px-grid-dark.png"),this.load.tilemapTiledJSON("map","office.json"),this.load.spritesheet("duck","ducky_2_spritesheet.png",{frameWidth:32,frameHeight:32})}create(){this.scene.start("MainMenu")}}const d={type:i.AUTO,width:1024,height:768,physics:{default:"arcade",arcade:{debug:!1}},parent:"game-container",backgroundColor:"limegreen",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[r,c,o,a,n]};document.addEventListener("DOMContentLoaded",(()=>{new i.Game({...d,parent:"game-container"})}));
